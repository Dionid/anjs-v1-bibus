version: "3.5"

services:
  zookeeper:
    image: zookeeper:3.5
    hostname: zookeeper
    networks:
      clickhouse-network:
        ipv4_address: 172.23.0.10

  clickhouse01:
    image: yandex/clickhouse-server:21.7.4
    hostname: clickhouse01
    networks:
      clickhouse-network:
        ipv4_address: 172.23.0.11
    ports:
      - 8123:8123
      - 9000:9000
    volumes:
      - ./users.xml:/etc/clickhouse-server/users.xml
      - ./config-01.xml:/etc/clickhouse-server/config.xml
    depends_on:
      - zookeeper

networks:
  clickhouse-network:
    name: clickhouse-network
    ipam:
      config:
        - subnet: 172.23.0.0/24
